---
title: useMint
description: Hook to fetch and monitor mint account data with typed information
---

# useMint

The `useMint` hook fetches and monitors mint account data from the Solana blockchain, providing typed mint information including supply, decimals, and authorities.

## Usage

### Direct Import
```tsx
import { useMint } from '@arc/solana'

function MintInfo({ mintAddress }) {
  const { mint, isLoading, error, exists } = useMint({
    mintAddress
  })
  
  if (isLoading) return <div>Loading mint data...</div>
  if (error) return <div>Error: {error.message}</div>
  if (!exists) return <div>Mint not found</div>
  
  return (
    <div>
      <p>Supply: {mint.supply.toString()}</p>
      <p>Decimals: {mint.decimals}</p>
      <p>Mint Authority: {mint.mintAuthority.__option}</p>
      <p>Freeze Authority: {mint.freezeAuthority.__option}</p>
    </div>
  )
}
```

### Copy Hook Code
```tsx
'use client'

import { useQuery, useQueryClient } from '@tanstack/react-query'
import { useEffect, useCallback } from 'react'
import { useArcClient } from '../core/arc-client-provider'
import { releaseRpcConnection } from '../core/rpc-manager'
import { fetchMint } from '@solana-program/token'
import { 
  address,
  type Address
} from '@solana/kit'
import { queryKeys } from '../utils/query-keys'

export interface MintAccount {
  mintAuthority: { __option: 'Some'; value: Address } | { __option: 'None' }
  supply: bigint
  decimals: number
  isInitialized: boolean
  freezeAuthority: { __option: 'Some'; value: Address } | { __option: 'None' }
}

export interface UseMintOptions {
  mintAddress?: string | Address
  enabled?: boolean
  refreshInterval?: number
}

export interface UseMintReturn {
  mint: MintAccount | null
  isLoading: boolean
  error: Error | null
  refetch: () => void
  clear: () => void
  exists: boolean
}

/**
 * ðŸŽ‰ Arc Level 2: Typed Mint Account Data
 * 
 * Fetches and deserializes mint account data using Kit's fetchMint codec.
 * Returns properly typed mint information including supply, decimals, and authorities.
 * 
 * @example
 * ```tsx
 * // Simple usage with explicit mint address
 * const { mint, isLoading } = useMint({ 
 *   mintAddress: 'So11111111111111111111111111111111111111112' // Wrapped SOL
 * })
 * 
 * if (mint) {
 *   console.log(`Supply: ${mint.supply}`)
 *   console.log(`Decimals: ${mint.decimals}`) 
 *   console.log(`Mint Authority: ${mint.mintAuthority.__option}`)
 * }
 * ```
 */
export function useMint(options: UseMintOptions = {}): UseMintReturn {
  const { network } = useArcClient()
  const queryClient = useQueryClient()
  
  useEffect(() => {
    return () => {
      releaseRpcConnection(network.rpcUrl)
    }
  }, [network.rpcUrl])
  
  const {
    mintAddress,
    enabled = true,
    refreshInterval = 60000,
  } = options

  const query = useQuery({
    queryKey: queryKeys.mint(mintAddress || undefined),
    queryFn: async (): Promise<MintAccount | null> => {
      if (!mintAddress) {
        throw new Error('Mint address is required')
      }
      
      try {
        const { transport } = (useArcClient() as any).config
        // fetchMint accepts an rpc-like interface; wrap transport minimally
        const rpcShim = {
          getAccountInfo: (addr: any, opts?: any) => ({
            send: () => transport.request({ method: 'getAccountInfo', params: [addr, opts] })
          })
        } as any
        const mintData = await fetchMint(rpcShim, address(mintAddress))
        
        return mintData.data as MintAccount
      } catch (error) {
        throw error
      }
    },
    enabled: enabled && !!mintAddress,
    refetchInterval: refreshInterval,
    refetchOnWindowFocus: false,
    staleTime: 30_000,
    gcTime: 5 * 60_000,
    retry: 1,
    notifyOnChangeProps: ['data', 'error'],
  })

  const clear = useCallback(() => {
    queryClient.removeQueries({ queryKey: queryKeys.mint(mintAddress || undefined) })
  }, [queryClient, mintAddress])

  return {
    mint: query.data || null,
    isLoading: query.isLoading,
    error: query.error,
    refetch: query.refetch,
    clear,
    exists: !!query.data,
  }
}
```

## Parameters

- `mintAddress?: string | Address` - The mint address to fetch data for
- `enabled?: boolean` - Whether the query is enabled (default: true)
- `refreshInterval?: number` - How often to refresh data in milliseconds (default: 60000)

## Return Value

- `mint: MintAccount | null` - The mint account data
- `isLoading: boolean` - Whether the mint data is loading
- `error: Error | null` - Any error that occurred
- `refetch: () => void` - Function to manually refetch the mint data
- `clear: () => void` - Function to clear cached mint data
- `exists: boolean` - Whether the mint account exists

## MintAccount Properties

- `mintAuthority: { __option: 'Some'; value: Address } | { __option: 'None' }` - The mint authority
- `supply: bigint` - Total supply of the token
- `decimals: number` - Number of decimal places for the token
- `isInitialized: boolean` - Whether the mint is initialized
- `freezeAuthority: { __option: 'Some'; value: Address } | { __option: 'None' }` - The freeze authority

## Example

```tsx
import { useMint } from '@arc/solana'

function TokenMintDetails({ mintAddress }: { mintAddress: string }) {
  const { 
    mint, 
    isLoading, 
    error, 
    exists, 
    refetch 
  } = useMint({
    mintAddress,
    refreshInterval: 30000 // Refresh every 30 seconds
  })

  if (isLoading) {
    return (
      <div style={{ padding: '16px', textAlign: 'center' }}>
        <div>Loading mint information...</div>
      </div>
    )
  }

  if (error) {
    return (
      <div style={{ padding: '16px', color: 'red' }}>
        <div>Error loading mint: {error.message}</div>
        <button onClick={() => refetch()}>Retry</button>
      </div>
    )
  }

  if (!exists || !mint) {
    return (
      <div style={{ padding: '16px' }}>
        <div>Mint account not found</div>
      </div>
    )
  }

  const formatSupply = (supply: bigint, decimals: number) => {
    const divisor = BigInt(10 ** decimals)
    const quotient = supply / divisor
    const remainder = supply % divisor
    const fractional = remainder.toString().padStart(decimals, '0')
    return `${quotient}.${fractional}`
  }

  return (
    <div style={{ padding: '16px' }}>
      <h3>Mint Information</h3>
      
      <div style={{ marginBottom: '16px' }}>
        <p><strong>Address:</strong></p>
        <p style={{ fontFamily: 'monospace', fontSize: '14px', wordBreak: 'break-all' }}>
          {mintAddress}
        </p>
      </div>

      <div style={{ display: 'grid', gap: '8px' }}>
        <div>
          <strong>Total Supply:</strong> {formatSupply(mint.supply, mint.decimals)}
        </div>
        
        <div>
          <strong>Decimals:</strong> {mint.decimals}
        </div>
        
        <div>
          <strong>Raw Supply:</strong> {mint.supply.toString()}
        </div>
        
        <div>
          <strong>Initialized:</strong> {mint.isInitialized ? 'Yes' : 'No'}
        </div>
        
        <div>
          <strong>Mint Authority:</strong>{' '}
          {mint.mintAuthority.__option === 'Some' 
            ? mint.mintAuthority.value 
            : 'None (Minting disabled)'
          }
        </div>
        
        <div>
          <strong>Freeze Authority:</strong>{' '}
          {mint.freezeAuthority.__option === 'Some' 
            ? mint.freezeAuthority.value 
            : 'None (Freezing disabled)'
          }
        </div>
      </div>

      <button 
        onClick={() => refetch()}
        style={{
          marginTop: '16px',
          padding: '8px 16px',
          backgroundColor: '#2196F3',
          color: 'white',
          border: 'none',
          borderRadius: '4px',
          cursor: 'pointer'
        }}
      >
        Refresh
      </button>
    </div>
  )
}
```

## Use Cases

- **Token Information Display**: Show detailed information about any SPL token
- **Supply Monitoring**: Track total supply and circulation of tokens
- **Authority Verification**: Check mint and freeze authorities for security analysis
- **Token Validation**: Verify that a mint address corresponds to a valid token
- **Decimals Reference**: Get the correct decimal places for token amount calculations

## Notes

- Uses @solana-program/token's fetchMint for efficient and typed data retrieval
- Automatically handles connection cleanup to prevent memory leaks
- Caches data for 30 seconds to reduce unnecessary network requests
- Returns typed data that's safe to use in calculations and displays